<ion-navbar *navbar>
  <button menuToggle>
    <ion-icon name="menu"></ion-icon>
  </button>
  <ion-title>OPS</ion-title>
  <ion-buttons end>
    <button (click)="openHelp()" primary>
      <ion-icon name="help"></ion-icon>
    </button>
  </ion-buttons>
</ion-navbar>

<ion-grid dark class="home-display">
  <ion-row>
    <ion-col class="icon-display" [ngStyle]="{'border-color': '#FF9800', 'color': '#FF9800', 'box-shadow': 'inset 0 0 32px 0 rgba(255, 152, 0, 0.27)'}">
      <ion-icon name="thermometer"></ion-icon>
      <span class="value">23</span>
      <span class="unit">°C</span>
    </ion-col>
    <ion-col class="icon-display" [ngStyle]="{'border-color': '#a23016', 'color': '#a23016', 'box-shadow': 'inset 0 0 32px 0 rgba(162, 48, 22, 0.26)'}">
      <ion-icon name="thermometer"></ion-icon>
      <span class="value">42</span>
      <span class="unit">°C</span>
    </ion-col>
    <ion-col width-10 class="icon-status">
      <ion-icon name="flame"></ion-icon>
    </ion-col>
    <ion-col width-10 class="icon-status">
      <ion-icon name="snow"></ion-icon>
    </ion-col>
    <ion-col width-10 class="icon-status" [ngStyle]="{'background-color': 'rgb(109, 128, 6)'}">
      <ion-icon name="nuclear"></ion-icon>
    </ion-col>
    <ion-col width-10 class="icon-status">
      <ion-icon name="exit"></ion-icon>
    </ion-col>
  </ion-row>
</ion-grid>

<ion-content class="home" scroll="false">

  <div [ngSwitch]="config.ctrlMode" style="height: calc(100% - 51px)">

    <div *ngSwitchWhen="'man'" style="height: 100%">
      <div class="chart-container" style="height: 60%">
        <base-chart class="chart"
          [datasets]="lineChartData"
          [labels]="lineChartLabels"
          [options]="lineChartOptions"
          [colors]="lineChartColours"
          [chartType]="lineChartType"
          (chartHover)="chartHovered()"
          (chartClick)="chartClicked()">
        </base-chart>
      </div>
      <ion-list style="height: 40%">
        <ion-item>
          <ion-label>Temperature</ion-label>
          <ion-range min="-200" max="200" [(ngModel)]="singleValue" pin="true">
            <ion-icon small range-left name="thermometer"></ion-icon>
            <ion-icon range-right name="thermometer"></ion-icon>
          </ion-range>
        </ion-item>
      </ion-list>
    </div>

    <div *ngSwitchWhen="'auto'" style="height: 100%; padding: 0">
      <div class="chart-container" style="height: calc(100%)">
        <base-chart class="chart"
          [datasets]="lineChartData"
          [labels]="lineChartLabels"
          [options]="lineChartOptions"
          [colors]="lineChartColours"
          [chartType]="lineChartType"
          (chartHover)="chartHovered()"
          (chartClick)="chartClicked()">
        </base-chart>
      </div>
      <ion-grid dark class="home-control">
        <ion-row *ngIf="status === 'running' || status === 'paused'">
          <ion-col width-20>
            {{status}}
          </ion-col>
          <ion-col>
            <div class="Progress">
              <progress max="100" value="80" class="Progress-main">
                <div class="Progress-bar" role="presentation">
                  <span class="Progress-value" style="width: 80%;"> </span>
                </div>
              </progress>
            </div>
          </ion-col>
          <ion-col width-10 *ngIf="status === 'running'">
            <button favorite small full (click)="pauseTask()">
              <ion-icon name="pause"></ion-icon>
            </button>
          </ion-col>
          <ion-col width-10 *ngIf="status === 'paused'">
            <button small full (click)="restartTask()">
              <ion-icon name="skip-forward"></ion-icon>
            </button>
          </ion-col>
          <ion-col width-10 *ngIf="status === 'running' || status === 'paused'">
            <button danger small full (click)="stopTask()">
              <ion-icon name="square"></ion-icon>
            </button>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="status === 'idle'">
          <ion-col width-20>
            <ion-icon dark name="map"></ion-icon>
          </ion-col>
          <ion-col style="padding-right: 5px;">
            <button full small dark (click)="randomize()">
              Reflow Lead-Free
            </button>
          </ion-col>
          <ion-col width-20>
            <button small full (click)="startTask()">
              <ion-icon name="play"></ion-icon>
            </button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <ion-list *ngSwitchWhen="'cron'">
      Listing
    </ion-list>

  </div>

</ion-content>

<ion-toolbar position="bottom" dark>
  <ion-segment [(ngModel)]="config.ctrlMode">
    <ion-segment-button value="man" (ionSelect)="setMode('man')">
      Manual
    </ion-segment-button>
    <ion-segment-button value="auto" (ionSelect)="setMode('auto')">
      Auto
    </ion-segment-button>
    <ion-segment-button value="cron" (ionSelect)="setMode('cron')">
      Schedule
    </ion-segment-button>
    <ion-segment-button value="cam" (ionSelect)="setMode('cam')">
      Live
    </ion-segment-button>
  </ion-segment>
</ion-toolbar>
